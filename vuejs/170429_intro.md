## Vue 는 무엇인가?
- MVVM 패턴의 ViewModel 레이어에 해당하는 뷰단 라이브러리
- Angular 에서 지원하는 **2 way data bindings** 을 동일하게 제공
- *데이터 바인딩* 과 *화면 단위를 컴포넌트 형태로 제공하며 API 를 지원*하는데에 궁극적인 목적이 있음
- 다른 Front-End FW (Angular, React) 와 [비교](https://vuejs.org/v2/guide/comparison.html)했을 때 훨씬 가볍고 빠름.
- 간단한 Vue 를 적용하는데 있어서도 러닝커브가 낮고, 쉽게 접근 가능

---
## MVVM 패턴이란?
- [위키](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel) 에 명시된 것처럼,

---
## Vue Instance
#### Vue Instance 생성자
- Vue 생성자를 만드는 방법은 아래와 같다.

```javascript
// vm 은 ViewModel 을 뜻한다. (관행적인 코딩 컨벤션)
var vm = new Vue({
  // options
})
```

- Vue 객체를 생성할 때 아래와 같이 *data, template, el, methods, life cycle callback* 등의 options 을 포함할 수 있다.

```javascript
var vm = new Vue({
  template: ...,
  el: ...,
  methods: {

  },
  // ...
})
```

- 각 options 으로 미리 정의한 vue 객체를 확장하여 재사용이 가능하다. 하지만 아래 방법 보다는 template 에서 custom element 로 작성하는 것이 더 좋다.

```javascript
var MyComponent = Vue.extend({
  // template, el, methods 와 같은 options 정의
})
// 위에서 정의한 options 를 기본으로 하는 컴포넌트 생성
var myComponentInstance = new MyComponent()
```

---
#### Vue Instance 라이프싸이클 초기화
Vue 객체가 생성될 때 아래의 초기화 작업을 수행한다.

- 데이터 관찰
- 템플릿 컴파일
- DOM 에 객체 연결
- 데이터 변경시 DOM 업데이트

이 초기화 작업 외에도 개발자가 의도하는 커스텀 로직을 아래와 같이 추가할 수 있다.

```javascript
var vm = new Vue({
  data: {
    a: 1
  },
  created: function () {
    // this 는 vm 을 가리킴
    console.log('a is: ' + this.a)
  }
})
```

이 외에도 라이프싸이클 단계에 따라 `mounted`, `updated`, `destroyed` 등을 사용할 수 있다.
이 라이프싸이클 초기화 메서드로 커스텀 로직을 수행하기 때문에 Vue 에서는 따로 Controller 를 갖고 있지 않다.

---
## Vue Components
- 화면에 비춰지는 뷰의 단위를 쪼개어 재활용이 가능한 형태로 관리하는 것이 컴포넌트

![vue-js-component-intro-picture](https://vuejs.org/images/components.png)

---
- 컴포넌트 등록은 아래와 같은 코드로 생성 가능하다.

```html
<div id="app">
  <my-component></my-component>
</div>
```

```js
// 등록
Vue.component('my-component', {
  template: '<div>A custom component!</div>'
})
// Vue 인스턴스 생성
new Vue({
  el: '#app'
})
```

**주의할 점 : Vue 인스턴스를 생성하기전에 꼭 Component 부터 등록!**

---
- 컴포넌트의 `data` 속성은 꼭 함수로 작성해야한다.

```js
Vue.component('my-component', {
  data: {
    message: 'hello'
  }
})

var data = { text: 'hello' }
Vue.component('my-component', {
  data: function () {
    return data;
  }
  // 모든 컴포넌트가 같은 값을 공유하지 않게 아래와 같이 수정
  // data: function () {
  //   return {
  //     text: 'hello'
  //   }
  // }
})
```

---
#### Global or Local Component
- 컴포넌트를 뷰 인스턴스에 등록해서 사용할 때 다음과 같이 global 하게 등록할 수 있다.

```js
Vue.component('my-component', {
  // ...
})
```

---
- local 하게 등록하는 방법은 다음과 같다.

```js
var cmp = {
  data: function () {
    return {
      // ...
    };
  }
  template: '<hr>',
  methods: {}
}

new Vue({
  components: {
    'my-cmp' : cmp
  }
})
```

---
#### 부모와 자식 컴포넌트 관계
- 구조상 상-하 관계에 있는 컴포넌트의 통신은
  - 부모 -> 자식 : props down
  - 자식 -> 부모 : events up

![parent-child-components-relationship](https://vuejs.org/images/props-events.png)

---
#### Props
- 모든 컴포넌트는 각 컴포넌트 자체의 스코프를 갖는다.
  - 예를 들어, 하위 컴포넌트가 상위 컴포넌트의 값을 바로 참조할 수 없는 형식
- **상위에서 하위로 값을 전달하려면 props 속성을 사용한다.**

---

```js
Vue.component('child-component', {
  props: ['passedData'],
  template: '<p>{{passedData}}</p>'
});

var app = new Vue({
  el: '#app',
  data: {
    message: 'Hello Vue! from Parent Component',
  }
});
```

```html
<div id="app">
  <child-component v-bind:passed-data="message"></child-component>
</div>
```

**주의 할점 : js 에서 props 변수 명명을 카멜 기법으로 하면 html 에서 접근은 케밥 기법(`-`) 으로 가야한다.**

![props-parsing-rules-between-components](C:\github\TIL\vuejs\images\props-name-parsing-tip.png)

---
## Vue Routers
-

---
#### Nested Routers
- 라우터로 화면을 이동했을 때 Nested Routers 를 이용하여 여러개의 컴포넌트가 렌더할 수 있다.

**주의사항**
아래는 nested router 를 바로 사용할 때 주의해야 하는 vue 의 성질이다.
vue 는 한 tag 단위만 렌더가 가능하다. 여러 개의 태그를 한개의 뷰로 사용할 수 없음.
따라서 아래는 기존에 렌더하는 tag 의 안에 router-view 를 사용하지 않고 밖에 넣었을 때 발생하는 에러.
`Component template should contain exactly one root element`

```js
var Foo = {
  template:
    `<div>foo</div><router-view></router-view>` // 에러 발생
    `<div>foo <router-view></router-view></div>` // div 의 vue tag 단위 안에 router-view 를 포함 시켜야 함
};
```

![common-error-when-using-nested-router](C:\github\TIL\vuejs\images\common-nested-view-error-in-vue-router.png)

---
#### Named Views
- Nested View 와 차이점이 무엇인지?

---
## Vue Templates
- Vue 는 DOM 의 요소와 Vue 인스턴스를 매핑할 수 있는 HTML Template 을 사용.
- Vue 는 template 으로 렌더링 할 때 Virtual DOM 을 사용하여 DOM 조작을 최소화 하고 렌더링을 꼭 다시 해야만 하는 요소를 계산하여 성능 부하를 최소화.
  - 원하면 render function 을 직접 구현하여 사용할 수 있음

---
- Attributes : HTML Attirubtes 를 Vue 의 변수와 연결할 때는 `v-bind` 를 이용

  ```html
  <div v-bind:id="dynamicId"></div>
  ```

- JS Expressions : `{{ }}` 안에 다음과 같이 javascript 표현식도 가능하다.

  ```html
  <div>{{ number + 1 }}</div> <!-- O -->
  <div>{{ message.split('').reverse().join('') }}</div> <!-- O -->
  <div>{{ if (ok) { return message } }}</div> <!-- X -->
  ```


이어서
https://vuejs.org/v2/guide/syntax.html#Directives

---
## Data Binding
- Vue 가 DOM 기반 HTMl Template 에 Vue 데이터를 바인딩 하는 방법은 아래와 같이 크게 3가지가 있다.
  - Interpolation (값 대입)
  - Binding Expressions (값 연결)
  - Directives (디렉티브 사용)

#### Interpolation - 값 대입
- Vue 의 가장 기본적인 데이터 바인딩 체계는 Mustache `{{ }}` 를 따른다.

```html
<span>Message: {{ msg }}</span>
<span>This will never change: {{* msg }}</span>
<div id="item-{{ id }}"></div>
```

#### Binding Expressions - 값 연결
- `{{ }}` 를 이용한 데이터 바인딩을 할 때 자바스크립트 표현식을 사용할 수 있다.

```html
<div>{{ number + 1 }}</div> <!-- O -->
<div>{{ message.split('').reverse().join('') }}</div> <!-- O -->
<div>{{ if (ok) { return message } }}</div> <!-- X -->
```

- Vue 에 내장된 Filter 를 `{{ }}` 안에 사용할 수 있다. 여러개 필터 체인 가능

```html
{{ message | capitalize }}
{{ message | capitalize | upcapitalize}}
```

---
#### Directives
- Vue 에서 제공하는 특별한 Attributes 이며 `-v` 의 prefix (접두사) 를 갖는다.
- *자바스크립트 표현식, filter* 모두 적용된다.

```html
<!-- login 의 결과에 따라 p 가 존재 또는 미존재 -->
<p v-if="login">Hello!</p>
<!-- click = {{doSomething}} 와 같은 역할 -->
<a v-on:click="doSomething">
```

---
#### Class Binding
- CSS 스타일링을 위해서 class 를 아래 2가지 방법으로 추가가 가능하다.
  - `class="{{ className }}"`
  - `v-bind:class`
- 주의할 점은 위의 두 방법을 함께 사용하지 않고 한 가지만 적용해야 에러를 미연에 방지할 수 있다.

---
- 아래와 같이 `class` 속성과 `v-bind:class` 속성을 동시에 사용해도 된다.

```html
<div class="static" v-bind:class="{ 'class-a': isA, 'class-b': isB }"></div>
<script>
data: {
  isA: true,
  isB: false
}
</script>
```

위 결과 값은

```html
<div class="static class-a"></div>
```

---
- 아래와 같이 Array 구문도 사용할 수 있다.

```html
<div v-bind:class="[classA, classB]">
<script>
data: {
  classA: 'class-a',
  classB: 'class-b'
}
</script>
```

---
## [Single File Components](https://vuejs.org/v2/guide/single-file-components.html) w JSX
- 앱의 복잡도가 증가할 때, `.vue` 라는 파일 단위 안에 html, js, css 를 관리할 수 있는 방법
- 복잡도가 커짐에 따라 야기될 수 있는 문제들
  1. 모든 컴포넌트에 고유의 이름을 붙여야 함
  2. js 파일에서 template 안의 html 의 문법 강조가 되지 않음
  3. js 파일상에서 css 스타일링 작업이 거의 불가
  4. ES5 를 이용하여 계속 앱을 작성할 경우 Babel 빌드가 지원되지 않음

---
- `.vue` 파일을 브라우저가 렌더할 수 있는 걸로 변환하려면 webpack 의 [vue-loader](https://github.com/vuejs/vue-loader) 또는 browserify 이용

```html
<template>
<!-- ... -->
</template>

<script>
// ...
</script>

<style>
/*...*/
</style>
```

> 주의 : ES5 를 사용하는 경우 single file component 의 혜택을 볼 수 없음

---
## Vue Loader
- `.vue` 형태의 파일을 javascript 모듈 형태로 변환해주는 webpack loader
- Vue Loader 로 인해 얻게 되는 장점들은
  1. ES 2015 지원
  2. `<style>` 과 `<template>` 에 대한 각각의 webpack loader 지원. ex) sass, jade
  3. **각 `.vue` 컴포넌트의 스코프로 좁힌 css 스타일링 지원**
  4. webpack 의 모듈 번들링에 대한 지원과 의존성 관리가 제공
  5. 개발 시 *hot reloading* 지원

---
## Vue Development Workflow
vue cli 로 간단한 webpack 설정이 되어 있는 프로젝트 생성이 가능하다.

```node
npm install -global vue-cli
vue init webpack-simple
npm install
npm run dev
```

```js
export default {
  // 이 안의 내용은 모두 Vue Instance 에 포함되어 생성된다.
}
```

---
## Glossory for Reference
#### Virtual Dom in Vue?
-

---
#### 왜 data 를 this 가 아닌 self 로 연결해야 받아지는가?
-

---
## 참고
- [Vue Official Doc](https://vuejs.org/v2/guide/)
- [NHN Enter](http://meetup.toast.com/posts/99)
- [Vue Router - Slide Share](https://www.slideshare.net/takuyatejima1/how-to-build-spa-with-vue-router-20)
- [Learn ES2015 Guide](https://babeljs.io/learn-es2015/)
- [webpack-simple, Github Repo](https://github.com/vuejs-templates/webpack-simple)
  - [webpack from first principles](https://www.youtube.com/watch?v=WQue1AN93YU)
  - [webpack advanced](https://egghead.io/courses/using-webpack-for-production-javascript-applications)
- [Vue Loader Docs](https://vue-loader.vuejs.org/en/)
